{% extends "base.html" %}
{% block title %}Pivot table{% endblock %}

{% block scripts %}
<script>
$(document).ready( function () {
    $('#pivot').DataTable({
      stateSave: true
    });
} );
</script>
{% endblock %}

{% block content %}
<div class="container-fluid">
  <div class="row-fluid">
    <div class="offset1 span8 pull-right">
        <a href="{{ url_for('download', filename='pivot', format='csv') }}" class="btn btn-success">
        <i class="fa fa-cloud-download"></i> CSV
      </a>
      <a href="{{ url_for('download', filename='pivot', format='xlsx') }}" class="btn btn-success">
        <i class="fa fa-cloud-download"></i> XLSX
      </a>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-lg-12 text-center">
      <h1>Pivot table</h1>
      <p class="lead">So much better than Excel, isn't it?</p>
  </div>
</div>

<div class="row">
  <table id="pivot" class="table table-hover">
      <thead>
          <tr>
            {% for c in table_rows[0] %}
              <th>{{ c }}</th>
            {% endfor %}
          </tr>
      </thead>
      <tbody>
        {% for row in table_rows[1:-1] %}
          <tr>
              <th>{{ row[0] }}</th>
              {% for cell in row[1:] %}
                <td>{{ cell }}</td>
              {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
            <th>{{ table_rows[-1][0] }}</th>
            {% for cell in table_rows[-1][1:] %}
              <td>{{ cell }}</td>
            {% endfor %}
        </tr>
      </tfoot>
  </table>
</div>
{% endblock %}
